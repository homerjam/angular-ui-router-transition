!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ramjet=e()}(this,function(){"use strict";function t(){L||document.body.appendChild(I),L+=1}function e(){L-=1,L||document.body.removeChild(I)}function n(t){for(var e=1;t instanceof Element&&e;){var n=getComputedStyle(t);if("hidden"===n.visibility||"none"===n.display)throw new Error("Ramjet: you cannot transition between nodes that have visibility: hidden or display: none (or their children)");e*=parseFloat(n.opacity),t=t.parentNode}return e}function o(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(l){r=!0,i=l}finally{try{!o&&s["return"]&&s["return"]()}finally{if(r)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){var n=o(t,6),r=n[0],i=n[1],a=n[2],s=n[3],l=n[4],d=n[5],c=o(e,6),u=c[0],f=c[1],m=c[2],y=c[3],p=c[4],v=c[5];return[r*u+a*f,i*u+s*f,r*m+a*y,i*m+s*y,r*p+a*v+l,i*p+s*v+d]}function i(t){var e=o(t,6),n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],d=n*a-i*r;return[a/d,-r/d,-i/d,n/d,(i*l-s*a)/d,(s*r-n*l)/d]}function a(t){if("matrix("!==t.slice(0,7))throw new Error("Could not parse transform string ("+t+")");return t.slice(7,-1).split(" ").map(parseFloat)}function s(t){for(var e=[1,0,0,1,0,0];t instanceof Element;){var n=getComputedStyle(t),o=n.webkitTransform||n.transform;if("none"!==o){var i=a(o);e=r(i,e)}t=t.parentNode}return e}function l(t){var e=t.cloneNode(),n=void 0,o=void 0,r=void 0;if(1===t.nodeType)for(n=window.getComputedStyle(t),F.forEach(function(t){e.style[t]=n[t]}),o=t.childNodes.length,r=0;o>r;r+=1)e.appendChild(l(t.childNodes[r]));return e}function d(t,e){var n=t.namespaceURI===B,o=t.getBoundingClientRect(),r=window.getComputedStyle(t),s=M(t),d=/^rgb[a]?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d?.\d+)?\)$/,c=d.test(r.backgroundColor)?d.exec(r.backgroundColor).slice(1).map(parseFloat):null,u=l(t),f=void 0,m=void 0;if(n){var y=t.getScreenCTM();f="matrix("+[y.a,y.b,y.c,y.d,y.e,y.f].join(",")+")",m=[0,0,0,0]}else{var p=t.offsetParent;window.getComputedStyle(p),p.getBoundingClientRect();f=D(t);var v=t.style.transform||t.style.webkitTransform,b=r.webkitTransform||r.transform;if("none"!==b){var g=i(a(b));t.style.webkitTransform=t.style.transform="matrix("+g.join(",")+")",o=t.getBoundingClientRect(),t.style.webkitTransform=t.style.transform=v}u.style.position="absolute",u.style.top=o.top-parseInt(r.marginTop,10)+window.scrollY+"px",u.style.left=o.left-parseInt(r.marginLeft,10)+window.scrollX+"px",f="matrix("+f.join(",")+")",m=[parseFloat(r.borderTopLeftRadius),parseFloat(r.borderTopRightRadius),parseFloat(r.borderBottomRightRadius),parseFloat(r.borderBottomLeftRadius)]}var h={node:t,clone:u,isSvg:n,transform:f,borderRadius:m,opacity:s,backgroundColor:c,cx:(o.left+o.right)/2,cy:(o.top+o.bottom)/2,width:o.right-o.left,height:o.bottom-o.top};return h}function c(t){t.__ramjetOriginalTransition__=t.style.webkitTransition||t.style.transition,t.__ramjetOriginalOpacity__=t.style.opacity,t.style.webkitTransition=t.style.transition="",t.style.opacity=0}function u(t){"__ramjetOriginalOpacity__"in t&&(t.style.transition="",t.style.opacity=t.__ramjetOriginalOpacity__,t.__ramjetOriginalTransition__&&setTimeout(function(){t.style.transition=t.__ramjetOriginalTransition__}))}function f(t,e,n,o,r,i,a,s){var l=t?"translate("+e+" "+n+") scale("+(1+s*i)+" "+(1+s*a)+") translate("+-e+" "+-n+") translate("+s*o+" "+s*r+")":"translate("+s*o+"px,"+s*r+"px) scale("+(1+s*i)+","+(1+s*a)+")";return l}function m(t,e,n){var o=(e-t)*n+t;if(1==o)var r=1,i=n;else var r=o-n*n*o,i=(o-r)/(1-r);return[r,i]}function y(t,e,n){return m(t.opacity,e.opacity,n)}function p(t,e,n){var o;if(t.backgroundColor&&!isNaN(t.backgroundColor[3])&&e.backgroundColor&&!isNaN(e.backgroundColor[3]))o=m(t.backgroundColor[3],e.backgroundColor[3],n);else if(t.backgroundColor&&!isNaN(t.backgroundColor[3]))o=m(t.backgroundColor[3],e.backgroundColor?1:0,n);else{if(!e.backgroundColor||isNaN(e.backgroundColor[3]))return[!1,!1];o=m(t.backgroundColor?1:0,e.backgroundColor[3],n)}return[t.backgroundColor?"rgba("+t.backgroundColor.slice(0,3).join(",")+", "+o[0]+")":!1,e.backgroundColor?"rgba("+e.backgroundColor.slice(0,3).join(",")+", "+o[1]+")":!1]}function v(t,e,n,o,r){var i=1+r*n,a=1+r*o;return t.map(function(t,n){var o=e[n],s=(t+r*(o-t))/i,l=(t+r*(o-t))/a;return""+s+"px "+l+"px"})}function b(){q||document.body.appendChild(X),q+=1}function g(){q-=1,q||document.body.removeChild(X)}function h(t){return t}function w(t){return Math.pow(t,3)}function C(t){return Math.pow(t-1,3)+1}function k(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){t.style.borderTopLeftRadius=e[0],t.style.borderTopRightRadius=e[1],t.style.borderBottomRightRadius=e[2],t.style.borderBottomLeftRadius=e[3]}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(){return"_"+~~(1e6*Math.random())}function _(t,e,n){t.style[V]="alternate",t.style[W]=""+e.duration/1e3+"s",t.style[Z]=1,t.style[tt]=n,t.style[et]="linear"}function j(t){var e=document.createElement("style");e.type="text/css";var n=document.getElementsByTagName("head")[0],o=e.styleSheet;return o?o.cssText=t:e.innerHTML=t,n.appendChild(e),function(){return n.removeChild(e)}}function E(t,e,n){function o(n,o){var c=t.cx+r*o,u=t.cy+i*o,v=P(t.borderRadius,e.borderRadius,a,s,o),b=P(e.borderRadius,t.borderRadius,l,d,1-o),g=K(!1,c,u,r,i,a,s,o)+" "+t.transform,h=K(!1,c,u,-r,-i,l,d,1-o)+" "+e.transform,w=y(t,e,o),C=p(t,e,o);console.log(C),f.push("\n			"+n+"% {\n				opacity: "+w[0]+";\n				"+(C[0]?"background-color: "+C[0]:"")+";\n				border-top-left-radius: "+v[0]+";\n				border-top-right-radius: "+v[1]+";\n				border-bottom-right-radius: "+v[2]+";\n				border-bottom-left-radius: "+v[3]+";\n				"+J+": "+g+";\n			}"),m.push("\n			"+n+"% {\n				opacity: "+w[1]+";\n				"+(C[1]?"background-color: "+C[1]:"")+";\n				border-top-left-radius: "+b[0]+";\n				border-top-right-radius: "+b[1]+";\n				border-bottom-right-radius: "+b[2]+";\n				border-bottom-left-radius: "+b[3]+";\n				"+J+": "+h+";\n			}")}var r=e.cx-t.cx,i=e.cy-t.cy,a=e.width/t.width-1,s=e.height/t.height-1,l=t.width/e.width-1,d=t.height/e.height-1,c=n.easing||h,u=n.duration/50,f=[],m=[],v=[],b=void 0;for(b=0;u>b;b+=1){var g=100*(b/u),w=c(b/u);o(g,w)}return o(100,1),f=f.join("\n"),m=m.join("\n"),v=v.join("\n"),{fromKeyframes:f,toKeyframes:m,containerKeyframes:v}}function N(){var t=document.createElement("div");return t.style.position="absolute",t.style.left=t.style.top=0,X.appendChild(t),t}var A=["length","parentRule"],O=void 0;O="undefined"!=typeof CSS2Properties?Object.keys(CSS2Properties.prototype):Object.keys(document.createElement("div").style).filter(function(t){return!~A.indexOf(t)});var F=O,B="http://www.w3.org/2000/svg",I=document.createElementNS(B,"svg");I.style.position="fixed",I.style.top=I.style.left="0",I.style.width=I.style.height="100%",I.style.overflow="visible",I.style.pointerEvents="none",I.setAttribute("class","ramjet-svg");var L=0,M=n,D=s,K=f,P=v,X=document.createElement("div");X.style.position="absolute",X.style.top=X.style.left="0",X.style.width=X.style.height="100%",X.style.overflow="visible",X.style.pointerEvents="none",X.setAttribute("class","ramjet-html");var q=0,H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)},U=H,Y=function(t,n,o,r){function i(){var o=Date.now(),b=o-f;if(b>m)return t.clone.parentNode.removeChild(t.clone),n.clone.parentNode.removeChild(n.clone),(t.isSvg?e:g)(),(n.isSvg?e:g)(),void(r.done&&r.done());var h=v(b/m),w=y(t,n,h);t.clone.style.opacity=w[0],n.clone.style.opacity=w[1];var C=p(t,n,h);C[0]&&(t.clone.style.backgroundColor=C[0]),C[1]&&(n.clone.style.backgroundColor=C[1]);var k=P(t.borderRadius,n.borderRadius,l,d,h),T=P(n.borderRadius,t.borderRadius,c,u,1-h);R(t.clone,k),R(n.clone,T);var x=t.cx+a*h,S=t.cy+s*h,_=K(t.isSvg,x,S,a,s,l,d,h)+" "+t.transform,j=K(n.isSvg,x,S,-a,-s,c,u,1-h)+" "+n.transform;t.isSvg?t.clone.setAttribute("transform",_):t.clone.style.transform=t.clone.style.webkitTransform=t.clone.style.msTransform=_,n.isSvg?n.clone.setAttribute("transform",j):n.clone.style.transform=n.clone.style.webkitTransform=n.clone.style.msTransform=j,U(i)}T(this,Y);var a=n.cx-t.cx,s=n.cy-t.cy,l=n.width/t.width-1,d=n.height/t.height-1,c=t.width/n.width-1,u=t.height/n.height-1,f=Date.now(),m=r.duration||400,v=r.easing||h;i()},$=Y,z=document.createElement("div"),G=!0,J=void 0,Q=void 0,V=void 0,W=void 0,Z=void 0,tt=void 0,et=void 0,nt=void 0,ot=!window.ActiveXObject&&"ActiveXObject"in window;!ot&&("transform"in z.style||"webkitTransform"in z.style)&&("animation"in z.style||"webkitAnimation"in z.style)?(G=!0,J="transform"in z.style?"transform":"-webkit-transform","animation"in z.style?(Q="@keyframes",V="animationDirection",W="animationDuration",Z="animationIterationCount",tt="animationName",et="animationTimingFunction",nt="animationend"):(Q="@-webkit-keyframes",V="webkitAnimationDirection",W="webkitAnimationDuration",Z="webkitAnimationIterationCount",tt="webkitAnimationName",et="webkitAnimationTimingFunction",nt="webkitAnimationEnd")):G=!1;var rt=function(t,e,n,o){function r(){y&&p&&(t.clone.parentNode.removeChild(t.clone),e.clone.parentNode.removeChild(e.clone),g(),g(),o.done&&o.done(),m())}x(this,rt);var i=E(t,e,o),a=i.fromKeyframes,s=i.toKeyframes,l=i.containerKeyframes,d=S(),c=S(),u=S(),f="\n			"+Q+" "+d+"      { "+a+" }\n			"+Q+" "+c+"        { "+s+" }\n			"+Q+" "+u+" { "+l+" }",m=j(f);_(t.clone,o,d),_(e.clone,o,c),_(n,o,u);var y=void 0,p=void 0;t.clone.addEventListener(nt,function(){y=!0,r()}),e.clone.addEventListener(nt,function(){p=!0,r()})},it=rt,at={transform:function(e,n){var o=void 0===arguments[2]?{}:arguments[2];"function"==typeof o&&(o={done:o}),"duration"in o||(o.duration=400);var r=N(),i=d(e),a=d(n);return i.clone.style.opacity=1,a.clone.style.opacity=0,(i.isSvg?t:b)(),(a.isSvg?t:b)(),r.appendChild(i.clone),r.appendChild(a.clone),!G||o.useTimer||i.isSvg||a.isSvg?new $(i,a,r,o):new it(i,a,r,o)},hide:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e.forEach(c)},show:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e.forEach(u)},linear:h,easeIn:w,easeOut:C,easeInOut:k};return at});
